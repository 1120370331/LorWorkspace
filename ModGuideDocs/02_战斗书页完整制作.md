# 战斗书页完整制作操作手册

## 一、CardInfo.xml 战斗书页定义

### 基础结构

```xml
<?xml version="1.0" encoding="utf-8"?>
<DiceCardXmlRoot xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Version>1.1</Version>

  <Card ID="9000001">
    <Name>书页名称</Name>
    <Artwork>MyCard01.png</Artwork>
    <Rarity>Rare</Rarity>
    <Spec Range="Near" Cost="2" />
    <Script>MyCardSelfAbility</Script>
    <BehaviourList>
      <Behaviour Min="4" Dice="8" Type="Atk" Detail="Slash" Motion="J"
                 EffectRes="MyEffect_J" Script="MyDiceAbility" Desc="" />
    </BehaviourList>
    <Chapter>6</Chapter>
    <Priority>0</Priority>
  </Card>

</DiceCardXmlRoot>
```

---

## 二、书页属性详解

### 稀有度 `<Rarity>`

| 值 | 说明 | 卡面颜色 |
|----|------|----------|
| `Common` | 普通 | 绿色 |
| `Uncommon` | 罕见 | 蓝色 |
| `Rare` | 稀有 | 紫色 |
| `Unique` | 独特 | 金色 |

### 距离 `<Spec Range="...">`

| 值 | 说明 |
|----|------|
| `Near` | 近战 |
| `Far` | 远程 |
| `Instance` | 瞬发（对自己使用） |
| `FarArea` | 群攻-清算（不交锋） |
| `FarAreaEach` | 群攻-交锋（逐一交锋） |

### 群攻影响范围 `<Spec Affection="...">`

| 值 | 说明 |
|----|------|
| `Team` | 影响所有敌人 |
| `TeamNear` | 影响附近敌人 |

### 书页选项 `<Option>`

| 值 | 说明 |
|----|------|
| `OnlyPage` | 专属书页（需配合核心书页的OnlyCard，详见下方说明） |
| `ExhaustOnUse` | 使用后销毁（佚亡） |
| `EgoPersonal` | E.G.O个人书页 |
| `Personal` | 个人书页 |
| `NoInventory` | 不在书库显示 |
| `MultiDeck` | 可装备多套卡组 |

### 专属书页设置（OnlyPage + OnlyCard）

专属书页是只能被特定核心书页使用的战斗书页。设置专属书页需要**同时配置两个文件**：

#### 1. 战斗书页 (CardInfo.xml)

在战斗书页中添加 `<Option>OnlyPage</Option>`. `<BookIcon>` 仅用于显示专属图标, 不是功能必填：

```xml
<Card ID="9002005">
  <Name>倾覆万千之流</Name>
  <!-- ... 其他属性 ... -->
  <Option>OnlyPage</Option>
  <BookIcon>10000002</BookIcon>  <!-- 可选: 仅用于显示图标 -->
</Card>
```

#### 2. 核心书页 (EquipPage_Librarian.xml)

在核心书页的 `<EquipEffect>` 标签**内部**添加 `<OnlyCard>战斗书页ID</OnlyCard>`：

```xml
<Book ID="10000002">
  <Name>斯拉泽雅</Name>
  <TextId>-1</TextId>
  <DropTable>2</DropTable>
  <EquipEffect>
    <HP>103</HP>
    <!-- ... 其他属性 ... -->
    <OnlyCard>9002005</OnlyCard>  <!-- 必须在EquipEffect内部！ -->
    <Passive>9002001</Passive>
  </EquipEffect>
</Book>
```

#### 完整示例

假设要为角色"寒霜剑士"(核心书页ID: 10000001) 创建专属书页"绝对零度"(战斗书页ID: 9000099)：

**CardInfo.xml:**
```xml
<Card ID="9000099">
  <Name>绝对零度</Name>
  <Artwork>AbsoluteZero.png</Artwork>
  <Rarity>Unique</Rarity>
  <Spec Range="Near" Cost="4" />
  <Option>OnlyPage</Option>
  <BookIcon>10000001</BookIcon> <!-- 可选 -->
  <BehaviourList>
    <Behaviour Min="8" Dice="15" Type="Atk" Detail="Slash" Motion="S1" EffectRes="" Script="" Desc="" />
  </BehaviourList>
  <Chapter>6</Chapter>
  <Priority>0</Priority>
</Card>
```

**EquipPage_Librarian.xml:**
```xml
<Book ID="10000001">
  <Name>寒霜剑士</Name>
  <TextId>-1</TextId>
  <EquipEffect>
    <HP>100</HP>
    <Break>50</Break>
    <!-- ... 其他属性 ... -->
    <OnlyCard>9000099</OnlyCard>  <!-- 在EquipEffect内部！ -->
    <Passive>9000001</Passive>
  </EquipEffect>
</Book>
```

#### 常见踩坑

- 只有 `<OnlyCard>` 没有 `<Option>OnlyPage</Option>` 时, 书页不会作为专属书页出现.
- 若该书页没有被任何 DropBook 掉落, 又缺少 `<Option>OnlyPage</Option>`, 即使是本体也无法使用.
- `<BookIcon>` 仅用于显示专属图标, 不影响功能. 可省略.

> **注意**：`<OnlyCard>` 必须放在 `<EquipEffect>` 标签内部，否则不会生效！

---

## 三、骰子属性详解

### 骰子类型 `Type`

| 值 | 说明 |
|----|------|
| `Atk` | 攻击骰子 |
| `Def` | 防御骰子 |
| `Standby` | 反击骰子（被单方面攻击时才触发） |

### 骰子细节 `Detail`

| 值 | 说明 | 图标 |
|----|------|------|
| `Slash` | 斩击 | 斩击 |
| `Penetrate` | 穿刺 | 穿刺 |
| `Hit` | 打击 | 打击 |
| `Guard` | 防御 | 盾牌 |
| `Evasion` | 回避 | 闪避 |

### 动作 `Motion`

| 值 | 说明 |
|----|------|
| `H` | 打击通用动画 |
| `J` | 斩击通用动画 |
| `Z` | 穿刺通用动画 |
| `G` | 防御动画 |
| `E` | 回避动画 |
| `F` | 远程攻击动画 |
| `S1`~`S9` | 特殊动画（需自定义） |

---

## 四、完整示例：带所有功能的战斗书页

```xml
<Card ID="9000001">
  <Name>寒霜斩击</Name>
  <Artwork>FrostSlash.png</Artwork>
  <Rarity>Unique</Rarity>
  <Option>OnlyPage</Option>
  <Option>ExhaustOnUse</Option>
  <Keyword>onlypage_MyChar_Keyword</Keyword>
  <Spec Range="Near" Cost="3" />
  <Script>MyMod_FrostSlash</Script>
  <BehaviourList>
    <!-- 骰子1: 斩击攻击，命中时施加束缚 -->
    <Behaviour Min="5" Dice="9" Type="Atk" Detail="Slash" Motion="J"
               EffectRes="FrostEffect_J" Script="binding2atk"
               ActionScript="MyMod_SlashAction" Desc="" />
    <!-- 骰子2: 防御骰子 -->
    <Behaviour Min="3" Dice="7" Type="Def" Detail="Guard" Motion="G"
               EffectRes="FrostEffect_G" Script="" Desc="" />
    <!-- 骰子3: 穿刺攻击，自定义效果 -->
    <Behaviour Min="4" Dice="8" Type="Atk" Detail="Penetrate" Motion="Z"
               EffectRes="FrostEffect_Z" Script="MyMod_FrostDice" Desc="" />
  </BehaviourList>
  <Chapter>6</Chapter>
  <Priority>5</Priority>
</Card>
```

---

## 五、群攻书页示例

### 交锋型群攻 (FarAreaEach)

```xml
<Card ID="9000002">
  <Name>昙花一现</Name>
  <Artwork>FlashAttack.png</Artwork>
  <Rarity>Unique</Rarity>
  <Spec Range="FarAreaEach" Cost="6" Affection="Team"/>
  <Option>OnlyPage</Option>
  <Script>MyMod_FlashAttack</Script>
  <BehaviourList>
    <Behaviour Min="4" Dice="9" Type="Atk" Detail="Slash" Motion="J"
               EffectRes="" Script="MyMod_FlashDice" ActionScript="FlashAction" Desc="" />
    <Behaviour Min="4" Dice="9" Type="Atk" Detail="Slash" Motion="J"
               EffectRes="" Script="MyMod_FlashDice" ActionScript="FlashAction" Desc="" />
    <Behaviour Min="4" Dice="7" Type="Atk" Detail="Slash" Motion="J"
               EffectRes="" Script="MyMod_FlashDice" ActionScript="FlashAction" Desc="" />
  </BehaviourList>
  <Chapter>6</Chapter>
  <Priority>9000</Priority>
</Card>
```

### 清算型群攻 (FarArea)

```xml
<Card ID="9000003">
  <Name>绝对零度</Name>
  <Artwork>AbsoluteZero.png</Artwork>
  <Rarity>Unique</Rarity>
  <Spec Range="FarArea" Cost="4" Affection="Team"/>
  <Script>MyMod_AbsoluteZero</Script>
  <BehaviourList>
    <Behaviour Min="30" Dice="30" Type="Atk" Detail="Hit" Motion="S3"
               EffectRes="" Script="MyMod_ZeroDice" ActionScript="ZeroAction" Desc="" />
  </BehaviourList>
  <Chapter>6</Chapter>
  <Priority>999</Priority>
</Card>
```

---

## 六、装备书页（Instance类型）

装备书页是一种特殊的书页类型，使用后**立即生效**，不需要选择目标，也不参与拼点。游戏中的"不详之力"就是典型的装备书页。

### 与普通战斗书页的区别

| 特性 | 普通战斗书页 | 装备书页 |
|------|-------------|----------|
| Range | `Near` / `Far` | `Instance` |
| 触发方法 | `OnUseCard()` | `OnUseInstance()` |
| 需要选择目标 | 是 | 否 |
| 参与拼点 | 是 | 否 |
| 骰子类型 | `Atk` / `Def` | 通常使用 `Standby` 占位 |

### XML定义示例

```xml
<!-- 装备书页示例：不详之力类型 -->
<Card ID="9000010">
  <Name>能量注入</Name>
  <Artwork>EnergyInject.png</Artwork>
  <Rarity>Uncommon</Rarity>
  <Spec Range="Instance" Cost="0" />
  <Script>MyMod_EnergyInject</Script>
  <BehaviourList>
    <!-- 装备书页通常使用Standby类型骰子作为占位符 -->
    <Behaviour Min="1" Dice="1" Type="Standby" Detail="Hit" Motion="H"
               EffectRes="" Script="" ActionScript="" Desc="" />
  </BehaviourList>
  <Chapter>6</Chapter>
  <Priority>0</Priority>
</Card>
```

### 带冷却时间的EGO装备书页

```xml
<!-- EGO装备书页示例：带冷却时间 -->
<Card ID="9000011">
  <Name>自我之流</Name>
  <Artwork>SelfFlow.png</Artwork>
  <Rarity>Unique</Rarity>
  <Spec Range="Instance" Cost="1" />
  <Option>EgoPersonal</Option>
  <MaxCooltimeForEgo>4</MaxCooltimeForEgo>
  <Script>MyMod_SelfFlow</Script>
  <BehaviourList>
    <Behaviour Min="1" Dice="1" Type="Standby" Detail="Hit" Motion="H"
               EffectRes="" Script="" ActionScript="" Desc="" />
  </BehaviourList>
  <Chapter>6</Chapter>
  <Priority>0</Priority>
</Card>
```

### C#脚本实现

**重要**：装备书页必须使用 `OnUseInstance()` 方法，而不是 `OnUseCard()`！

```csharp
// 装备书页效果实现
public class DiceCardSelfAbility_MyMod_EnergyInject : DiceCardSelfAbilityBase
{
    public static string Desc = "[装备时] 恢复3点光芒，下回合失去3点光芒";

    // 装备书页使用 OnUseInstance 而不是 OnUseCard
    public override void OnUseInstance(BattleUnitModel unit, BattleDiceCardModel self, BattleUnitModel targetUnit)
    {
        // unit: 使用书页的单位
        // self: 书页本身
        // targetUnit: 目标单位（装备书页通常为null）

        int currentLight = unit.cardSlotDetail.PlayPoint;
        int recovered = unit.cardSlotDetail.RecoverPlayPointByCard(3);

        // 如果恢复的光芒超过了原有值，下回合失去多余部分
        if (recovered > currentLight)
        {
            unit.cardSlotDetail.LoseWhenStartRound(recovered - currentLight);
        }
    }
}

// EGO装备书页示例
public class DiceCardSelfAbility_MyMod_SelfFlow : DiceCardSelfAbilityBase
{
    public static string Desc = "[装备时] 扣除25点生命值，获得10层[流]";

    public override string[] Keywords => new string[] { "MyFlowKeyword" };

    public override void OnUseInstance(BattleUnitModel unit, BattleDiceCardModel self, BattleUnitModel targetUnit)
    {
        // 扣除生命值
        unit.LoseHp(25);

        // 添加自定义Buff
        // CardAbilityHelper.AddFlowStacks(unit, 10);

        // 或者添加游戏内置Buff
        unit.bufListDetail.AddKeywordBufByEtc(KeywordBuf.Strength, 3, unit);
    }
}
```

### OnUseInstance 方法参数说明

```csharp
public override void OnUseInstance(
    BattleUnitModel unit,        // 使用书页的单位
    BattleDiceCardModel self,    // 书页数据模型
    BattleUnitModel targetUnit   // 目标单位（装备书页通常为null）
)
```

**注意事项**：
- 在 `OnUseInstance` 中使用 `unit` 参数而不是 `this.owner`
- 装备书页的骰子不会实际投掷，只是占位符
- 可以配合 `<Option>EgoPersonal</Option>` 和 `<MaxCooltimeForEgo>` 实现带冷却的EGO装备

---

## 七、C#书页效果实现

### 书页使用时效果 (DiceCardSelfAbilityBase)

```csharp
// 文件: MyMod_FrostSlash.cs
public class DiceCardSelfAbility_MyMod_FrostSlash : DiceCardSelfAbilityBase
{
    public static string Desc = "[使用时] 获得2层强壮";

    // 使用书页时触发
    public override void OnUseCard()
    {
        owner.bufListDetail.AddKeywordBufThisRoundByEtc(KeywordBuf.Strength, 2, owner);
    }

    // 战斗开始时触发（书页被选中后）
    public override void OnStartBattle()
    {
        // 战斗开始时的效果
    }

    // 战斗结束时触发
    public override void OnEndBattle()
    {
        // 战斗结束时的效果
    }

    // 拼点胜利时触发（攻击方）
    public override void OnWinParryingAtk()
    {
        owner.cardSlotDetail.RecoverPlayPoint(1); // 恢复1光芒
    }

    // 攻击成功时触发
    public override void OnSucceedAttack()
    {
        owner.allyCardDetail.DrawCards(1); // 抽1张牌
    }
}
```

### 骰子命中时效果 (DiceCardAbilityBase)

```csharp
// 文件: MyMod_FrostDice.cs
public class DiceCardAbility_MyMod_FrostDice : DiceCardAbilityBase
{
    public static string Desc = "[命中时] 对目标施加3层束缚";

    // 攻击成功时触发
    public override void OnSucceedAttack(BattleUnitModel target)
    {
        if (target != null)
        {
            target.bufListDetail.AddKeywordBufByEtc(KeywordBuf.Binding, 3, owner);
        }
    }

    // 拼点胜利时触发
    public override void OnWinParrying()
    {
        owner.RecoverHP(5); // 恢复5点HP
    }

    // 拼点失败时触发
    public override void OnLoseParrying()
    {
        // 拼点失败的效果
    }

    // 投骰前触发
    public override void BeforeRollDice()
    {
        behavior.ApplyDiceStatBonus(new DiceStatBonus { power = 2 }); // 威力+2
    }
}
```

---

## 八、本地化文件

### 卡牌名称描述 (Localize/cn/BattleCards/)

```xml
<?xml version="1.0" encoding="utf-8"?>
<CardDescXmlRoot>
  <cardDescList>
    <BattleCardDesc ID="9000001">
      <Name>寒霜斩击</Name>
      <Desc>[使用时] 获得2层强壮</Desc>
      <BehaviourDescList>
        <BehaviourDesc>[命中时] 施加2层束缚</BehaviourDesc>
        <BehaviourDesc></BehaviourDesc>
        <BehaviourDesc>[命中时] 施加3层束缚</BehaviourDesc>
      </BehaviourDescList>
    </BattleCardDesc>
  </cardDescList>
</CardDescXmlRoot>
```

### 骰子效果描述 (Localize/cn/BattleCardAbilities/)

```xml
<?xml version="1.0" encoding="utf-8"?>
<BattleCardAbilityDescRoot>
  <BattleCardAbility ID="MyMod_FrostDice">
    <Desc>[命中时] 对目标施加3层束缚</Desc>
  </BattleCardAbility>
</BattleCardAbilityDescRoot>
```

---

## 九、卡面图片规格

| 属性 | 规格 |
|------|------|
| 格式 | PNG |
| 尺寸 | 建议 330x480 像素 |
| 位置 | `Resource/CombatPageArtwork/` |
| 命名 | 与XML中`<Artwork>`一致 |

---

## 十、常用内置骰子效果Script

| Script名称 | 效果 |
|------------|------|
| `binding1atk` | 命中时施加1层束缚 |
| `binding2atk` | 命中时施加2层束缚 |
| `binding3atk` | 命中时施加3层束缚 |
| `bleeding1atk` | 命中时施加1层流血 |
| `bleeding2atk` | 命中时施加2层流血 |
| `bleeding3atk` | 命中时施加3层流血 |
| `burn1atk` | 命中时施加1层烧伤 |
| `vulnerable1atk` | 命中时施加1层易伤 |
| `paralysis1atk` | 命中时施加1层麻痹 |
| `recoverHp5atk` | 命中时恢复5点HP |
| `recoverBreak5atk` | 命中时恢复5点混乱抗性 |
| `drawCard` | 命中时抽1张牌 |
| `drawCard2` | 命中时抽2张牌 |
| `energy1` | 命中时恢复1光芒 |

---

## 十一、抽牌与牌区流转机制(官方规则)

- 抽取书页来自抽牌区. 手牌已满8张时不再抽取(可利用已装备书页配合卦象规避抽卡限制).
- 书页在装备时同时进入使用区与保留区. 使用时从使用区移除. 含反击的书页在战斗开始时移除. 与群攻进行拼点的书页会在拼点时移除.
- 幕结束时, 仍在使用区中的书页会在使用区中移除, 然后将书页置入手牌区. 保留区中剩余书页置入弃牌区.
- 战斗过程中被丢弃的书页直接置入弃牌区.
- 抽牌时, 书页逐张从抽牌区抽取. 抽牌区书页数为0时暂停抽牌, 将弃牌区中的书页洗入抽牌区后继续抽取.
- 我方本幕使用的书页在幕结束后才会洗入弃牌堆, 待触发洗牌后进入抽牌区等待抽取. 因此无特殊说明的使用时抽取, 不会直接抽到本幕打出的书页.
- 高贵的下一幕多抽可规避本问题. 在卡组中加入平心静气可保证五情感之后的每幕满手牌. 平门.
- 类似效果还有封喉一刺被动能力2.png抽洗控牌.

---

## 十二、骰子伤害与结算机制(官方规则)

### 1) 结算公式与顺序

- 最终伤害公式:
  (骰子点数 + 伤害增加 - 伤害减免) x (百分比增伤之和) x 百分比减伤 x 目光 x 抗性 - 刀枪不入 = 最终伤害
- 顺序理解: 先准备武器(加减 buff), 再打出招式(百分比增伤), 最后命中防弹衣(刀枪不入).
- 对混乱状态下敌人无法造成混乱伤害.
- 对因机制处于固定体力的敌人无法造成伤害, 混乱伤害或追加伤害.
- 对免疫抗性敌人仅可造成追加伤害.

示例:
6~10斩击骰出9, 自身斩击伤害+3, 对方有集火, 刀枪不入与1层易损, 斩击抗性为耐性.
伤害为(9 + 3 + 1) x 1.5 x 0.5 - 1 = 8.75, 向下取整造成8伤害.

### 2) 基础伤害值

- 基础伤害值为攻击骰子或反击攻击骰子投出的点数, 经过威力加成结算后显示的点数.
- 这是决定受伤多少的原始参数, 与伤害抗性, 伤害 buff 共同计算最终伤害.
- 基础伤害值分为3种: 斩击, 突刺, 打击.

### 3) 伤害抗性

- 伤害抗性是第二个参数, 与基础伤害值和伤害 buff 共同决定最终伤害.
- 伤害抗性共有36种, 斩击/突刺/打击分别从体力与混乱抗性层面各有6种.
- 陷入混乱时, 若无特殊说明则所有抗性变为致命.

伤害抗性总览(红色为体力抗性, 黄色为混乱抗性):
- 致命: 受伤2.00. 图标: S致命.png, SB致命.png, P致命.png, PB致命.png, H致命.png, HB致命.png.
- 脆弱: 受伤1.50. 图标: S脆弱.png, SB脆弱.png, P脆弱.png, PB脆弱.png, H脆弱.png, HB脆弱.png.
- 一般: 受伤1.00. 图标: S一般.png, SB一般.png, P一般.png, PB一般.png, H一般.png, HB一般.png.
- 耐性: 受伤0.50. 图标: S耐性.png, SB耐性.png, P耐性.png, PB耐性.png, H耐性.png, HB耐性.png.
- 抵抗: 受伤0.25. 图标: S抵抗.png, SB抵抗.png, P抵抗.png, PB抵抗.png, H抵抗.png, HB抵抗.png.
- 免疫: 受伤0.00. 图标: S免疫.png, SB免疫.png, P免疫.png, PB免疫.png, H免疫.png, HB免疫.png.

例:
某一斩击骰子投出39, 受击方斩击抗性为耐性, 斩击混乱抗性为抵抗, 无其他伤害 buff.
则扣除39 x 0.50 = 19.5点体力, 39 x 0.25 = 9.75点混乱抗性.

### 4) 伤害 buff

- 伤害 buff 是第三个参数, 与基础伤害值, 伤害抗性共同决定最终伤害.
- 伤害 buff 描述通常为: 斩/突/打伤害+X, 或造成/受到的伤害+X%.
- 被动能力4.png黎明之火等被动的追加伤害, 不计算入伤害增加或减少.

通用 buff 列表:

| buff | 效果 |
|---|---|
| 守护.png守护 | 这一幕中被击中时所受伤害-x, x为层数 |
| 振奋.png振奋 | 这一幕中被击中时所受混乱伤害-x, x为层数 |
| 易损.png易损 | 这一幕中被击中时所受伤害+x, x为层数 |
| 伤害强化.png伤害强化 | 这一幕中进攻型骰子伤害+x, x为层数 |
| 烟气.png烟气 | 被击中时受到伤害+5x%, x为层数. 装备被动烟气缭绕时不再受额外伤害, 改为造成的伤害提升+5x% |
| 吸血.png吸血 | 层数>1时, 击中目标时伤害+3~7(来自语言层异想体书页恐水症与红酒) |
| 勇气(解放战).png激发勇气的药水 | 击中目标时伤害+6, 被击中时所受伤害+3(来自社会层异想体书页虚假的礼物) |

核心被动 buff 列表(在 buff 栏中显示):

| buff名称 | buff效果 | 核心被动 | 核心书页归属者 |
|---|---|---|---|
| 斩击架势(效果).png斩击架势 | 斩击骰造成的伤害+50% | 架势切换 | 堇紫泪滴 |
| 打击架势(效果).png打击架势 | 打击骰造成的混乱伤害+50% | 架势切换 | 堇紫泪滴 |
| 乾(效果).png乾 | 这一幕中击中目标时伤害与混乱伤害+1 | 乾坤坎離 | 美里奈、哈罗德、奥利维耶及하나协会3科收尾人 |
| 坤(效果).png坤 | 这一幕中被击中时所受伤害与混乱伤害-30% | 乾坤坎離 | 美里奈、哈罗德、奥利维耶及하나协会3科收尾人 |
| 集火.png集火 | 受到伤害与混乱伤害+50% | 收尾工作 | 尼可莱 |

核心被动效果列表(不在 buff 栏中显示):

| 被动名称 | 核心被动效果 | 核心书页归属者 |
|---|---|---|
| 华丽演出 | 使用至少由3种不同骰子组成的书页时将使其中的所有骰子威力+1且击中目标时伤害+1(不计入反击骰子且无法对反击骰子生效) | 奥斯瓦尔德 |
| 刀枪不入 | 受到伤害与混乱伤害-1(包含负面状态伤害) | 鲍里斯 |
| 诺沃面料 | 被击中时所受伤害与混乱伤害-1~2 | 阿尔加利亚、菲利普、艾琳、格蕾塔、不来梅、奥斯瓦尔德、塔尼娅、在宪、伊莲娜、普鲁托 |
| rnfmabj | 若应用于自身的崩溃异想体书页(红)多于觉醒异想体书页(绿)则使自身的所有骰子威力+1. 若数量超出2张则击中目标时伤害与混乱伤害+1 | 阳(rnfmabj) |
| 脑波充能集束犄角 | 每一幕开始时若充能层数不低于11则击中目标时混乱伤害+2 | 鲁道夫、驯鹿 |
| 极限冲击 | 每一幕开始时若充能层数达到20则击中目标时伤害与混乱伤害+50%. 且被击中时所受伤害与混乱伤害-30% | 马克西姆 |
| 供应过剩 | 若自身拥有10层烟气则击中目标时伤害+3 | 八重、叶工坊收尾人 |
| 血肉齿轮 | 书页的第一颗进攻型骰子伤害+2~3 | 齿轮信徒、艾琳 |
| 伤口溃烂 | 击中处于流血状态下的目标时伤害+3 | 东焕 |
| 下马威 | 斩击混乱伤害+1 | 剑契成员、金笠、伊莎多拉 |
| 弱点洞悉 | 造成脆弱或致命伤害时伤害+1, 造成脆弱或致命混乱伤害时混乱伤害+1 | 但丁、Seven协会3科收尾人 |
| 围捕烟气 | 击中目标时混乱伤害+(自身烟气层数x10)% | 王 |
| 杂技演出 | 远程战斗书页的进攻型骰子伤害+1 | 诺亚 |
| 再提速 | 若自身速度不低于5点则混乱伤害+1 | 灵活傀儡 |
| 强力突刺 | 突刺伤害+1 | 奥斯卡、帕梅莉 |
| 震撼突刺 | 突刺混乱伤害+1 | 奥斯卡、帕梅菈 |
| 撕破伤口 | 击中处于流血状态下的目标时伤害+1 | 基坎、锈链成员、后巷屠夫1、后巷屠夫2 |
| 疮痍之痛 | 击中处于流血状态下的目标时混乱伤害+1 | 基坎、锈链成员 |
| 雙麵羅刹 | 斩击伤害+2, 突刺伤害-1 | 斧頭幫干部 |
| 7阶突刺 | 突刺混乱伤害+2 | 7阶收尾人3 |
| 斧幫之魂 | 打击混乱伤害+1 | 斧頭幫成员 |
| 7阶斩击 | 斩击混乱伤害+2 | 7阶收尾人1、7阶收尾人2 |
| 8阶突刺 | 突刺混乱伤害+1 | 8阶收尾人3 |
| Zwei剑法1 | 斩击伤害+1 | 茱莉亚 |
| 8阶斩击 | 斩击混乱伤害+1 | 8阶收尾人1、8阶收尾人2 |
| 内脏打击 | 打击伤害+2 | 丧家犬成员 |
| 藏器待时 | 击中速度低于自身的目标时混乱伤害+1 | 马斯 |
| 割裂之刃 | 50%的概率使斩击伤害+1 | 璐璐亲友3 |
| 贯穿之刃 | 50%的概率使突刺伤害+1 | 璐璐亲友1 |
| 9阶斩击 | 50%的概率使斩击伤害+1 | 潤事务所收尾人1 |

提升/降低伤害的异想体书页一览:

| 书页名称 | 生效范围 | 伤害类型 | 效果 |
|---|---|---|---|
| 鲜血 | 自身受到的 | 混乱伤害 | +3~5 |
| 疤痕 | 自身受到的 | 斩击伤害 | -2~5 |
| 负罪感 | 自身受到的 | 混乱伤害 | -1~3 |
| 目光 | 自身造成或受到的 | 伤害 | 翻倍 |
| 他人的视线 | 自身造成的单方面 | 伤害 | +2~4 |
| 他人的视线 | 自身造成的拼点 | 伤害 | -3~6 |
| 关注与集中 | 自身造成或受到的反震 | 混乱伤害 | 翻倍 |
| 思念之声 | 所有司书造成的 | 混乱伤害 | +2~4 |
| 告解 | 所有司书受到的 | 混乱伤害 | -2 |
| 使徒 | 其他司书造成的 | 伤害 | +2~7 |
| 责罚之喙 | 自身造成的 | 伤害 | 见效果 |
| 巨目 | 被魅惑的来宾造成的 | 伤害 | +2~4 |
| 和平 | 被标记的来宾造成的 | 伤害 | -2~4 |
| 和平 | 被标记的来宾造成的 | 混乱伤害 | -2~4 |
| 家 | 按顺序攻击的司书造成的 | 伤害 | +3 |
| 猎物 | 自身对被标记的来宾 | 伤害 | +2~6 |
| 吸血 | 自身对流血状态下的目标 | 伤害 | +2~4 |
| 躯壳 | 自身因攻击骰子受到的 | 混乱伤害 | 免疫 |
| 正义 | 自身对坏蛋造成的 | 伤害 | +3~5 |
| 狂热崇拜 | 所有来宾造成的 | 伤害 | +2~4 |
| 害羞 | 自身造成的反震 | 混乱伤害 | +2~7 |
| 闪亮 | 被赋予着魔的来宾造成的 | 伤害 | +2~4 |
| 充电 | 自身造成的 | 伤害 | +2~7 |
| 音乐 | 所有司书及来宾造成的 | 伤害 | +4~8 |
| 安息 | 自身击中满足条件的角色时造成的 | 伤害 | +2~7 |
| 安息 | 自身击中满足条件的角色时造成的 | 混乱伤害 | +2~5 |
| 哀悼 | 所有有负面的司书及来宾受到的 | 伤害 | +2~4 |
| 委托 | 自身击中委托目标时造成的 | 伤害 | +3~5 |
| 第七颗子弹 | 自身造成的 | 伤害 | +1~7 |
| 贪食 | 自身击中当幕已损失体力的目标时造成的 | 伤害 | +1~3 |

### 5) 追加伤害

- 追加伤害描述通常为: 命中/拼点胜利时, 追加X点伤害或混乱伤害.
- 追加伤害不受除刀枪不入之外的任何伤害增减效果影响, 直接扣除体力或混乱.
- 追加伤害不参与抗性乘算, 但仍不能绕过固定体力机制.
- 诺沃面料无法抵挡追加伤害.
- 追加伤害紧跟在骰子伤害之后显示, 伤害为红色, 混乱伤害为黄色. 被完全阻挡时显示对应颜色的-0.

### 6) 负面状态伤害

可造成伤害的负面状态:
- 流血.png流血, 烧伤.png烧伤, 妖灵.png妖灵, 腐蚀(阳).png腐蚀.png腐蚀, 罪孽.png罪孽, 以及米里斯之页被动能力3.png拥火卧薪提供的混乱伤害.

规则与时机:
- 负面伤害同样不受除刀枪不入之外的任何伤害增减效果影响, 直接扣除体力或混乱.
- 妖灵.png妖灵, 烧伤.png烧伤与被动能力3.png拥火卧薪的伤害在每幕结束后, 下一幕投掷速度骰子之前进行扣除.
- 孢子.png孢子的伤害在每幕结束后, 下一幕开始之前进行扣除.
- 仅异想体书页审判提供的罪孽.png罪孽会造成伤害. 审判鸟的异想体镇压战中, 罪孽作为特殊行动计数器不具有实际效果(甚至可叠多于5层).

PS:
异想体书页长臂的描述有误. 实际免疫的是流血.png流血, 烧伤.png烧伤, 妖灵.png妖灵, 罪孽.png罪孽, 并不免疫腐蚀(阳).png腐蚀.png腐蚀.

---

## 十三、拼点与单方面攻击(官方规则)

### 1) 拼点(Clash)

- 定义: 双方骰子投掷后比较点数大小, 决定由哪方造成伤害的比较机制. 拼点书页在界面中显示为黄色实线双箭头.
- 发生条件: 双方书页互相指向, 对应速度骰子相遇时触发拼点.
- 拼点胜负可获得情感硬币(详见情感规则).
- 不同类型骰子的拼点规则请参考对应页面: 进攻型骰子拼点, 防御型骰子拼点, 反击型骰子拼点.
- 范围书页不进行拼点, 故无法通过摧毁骰子获得情感硬币.
- 远近交互规则:
  - 除反击外, 近战书页骰子与远程书页骰子拼点胜利时不立刻造成伤害.
  - 该骰子会被置于当前书页末尾, 待远程书页的攻击骰子耗尽后, 作为单方面攻击重新投掷并造成伤害.
  - 先制近战书页(如赤瞳, 血清-W等)与远程书页拼点时视为远程书页, 与近战书页拼点时视为近战书页. 详情见书页类型规则.

### 2) 单方面攻击(One-sided Attack)

- 定义: 当某速度骰子攻击另一速度骰子时, 对方未装备书页, 或书页未指向该速度骰子, 或该书页仅含反击骰子. 单方面攻击显示为蓝/红色实线单箭头.
- 发生条件补充:
  - 两速度骰子互相瞄准但一方或双方装备群体书页时, 准备阶段会显示为单方面攻击, 但实际上既不视为拼点, 也不视为单方面攻击(无法触发拼点相关效果).
  - 若准备阶段互相瞄准, 但在拼点发生前一方书页被摧毁(如血雾弥漫), 视为单方面攻击.
  - 若书页仅含反击骰子, 则战斗开始时该速度骰子视作未装备书页.
- 结算流程:
  - 单方面攻击时, 先与对方反击骰子库中的骰子进行拼点.
  - 反击骰拼点胜负同样可获得情感硬币.
  - 若无反击骰或反击骰已消耗, 则直接对目标造成伤害, 伤害遵循抗性等结算规则.
  - 己方书页中的防御型骰子会置入反击骰子库.

### 3) 制作要点

- 书页与骰子文本中区分"拼点胜利/失败"与"命中时"十分关键.
- 若希望效果只在拼点成立时生效, 使用"拼点胜利"类触发.
- 若希望效果在单方面攻击中也能生效, 使用"命中时"类触发.
