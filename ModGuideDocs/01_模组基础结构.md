# 模组基础结构操作手册

## 标准模组文件夹结构

```
YourModName/
├── Assemblies/
│   ├── YourModDLL.dll              # 编译生成的C#代码
│   └── 1FrameworkAssemblies/       # 框架依赖库
│
├── Data/
│   ├── CardInfo.xml                # 战斗书页定义
│   ├── PassiveList.xml             # 被动能力定义
│   ├── EquipPage_Librarian.xml     # 司书核心书页
│   ├── EquipPage_Enemy.xml         # 敌人核心书页
│   ├── EnemyUnitInfo.xml           # 敌人单位信息
│   ├── StageInfo.xml               # 关卡信息
│   ├── Deck_Enemy.xml              # 敌人卡组
│   ├── CardDropTable.xml           # 卡牌掉落表
│   ├── Dropbook.xml                # 书籍掉落
│   └── BookStory.xml               # 书籍故事
│
├── Localize/
│   ├── cn/
│   │   ├── BattleCards/            # 卡牌名称描述
│   │   ├── BattleCardAbilities/    # 骰子效果描述
│   │   ├── PassiveDesc/            # 被动描述
│   │   ├── Books/                  # 核心书页描述
│   │   ├── EffectTexts/            # Buff效果文本
│   │   └── StoryText/              # 剧情文本
│   ├── en/
│   └── kr/
│
├── Resource/
│   ├── CombatPageArtwork/          # 卡牌图片 (.png)
│   ├── AssetBundle/                # Unity资源包 (.ab)
│   ├── CustomAudio/                # 自定义音效
│   └── Stage/                      # 关卡背景
│
├── StageModInfo.xml                # 模组信息文件
└── preview.jpg                     # 预览图
```

---

## StageModInfo.xml 模板

```xml
<?xml version="1.0" encoding="utf-8"?>
<ModInfo>
  <ModId>YourModId</ModId>
  <Title>模组标题</Title>
  <Desc>模组描述</Desc>
  <Version>1.0</Version>
</ModInfo>
```

---

## ID命名规范

| 类型 | ID格式 | 示例 |
|------|--------|------|
| 被动 | 纯数字，建议9000000+ | `9000001` |
| 卡牌 | 纯数字，建议9000000+ | `9000101` |
| 核心书页 | 纯数字，建议10000000+ | `10000001` |
| 敌人单位 | 纯数字 | `9000001` |
| 关卡 | 纯数字 | `9000001` |

---

## C#类命名规范

| 类型 | 命名格式 | 示例 |
|------|----------|------|
| 被动能力 | `PassiveAbility_{名称}` | `PassiveAbility_MyPassive` |
| 书页效果 | `DiceCardSelfAbility_{名称}` | `DiceCardSelfAbility_MyCard` |
| 骰子效果 | `DiceCardAbility_{名称}` | `DiceCardAbility_MyDice` |
| Buff | `BattleUnitBuf_{名称}` | `BattleUnitBuf_MyBuff` |

---

## 必要的引用DLL

编译C#代码时需要引用以下DLL：

- `Assembly-CSharp.dll` - 游戏主程序集
- `0Harmony.dll` - Harmony库
- `BaseMod.dll` - BaseMod框架
- `UnityEngine.CoreModule.dll` - Unity核心
